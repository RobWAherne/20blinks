+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("gg.hotspot"),f=typeof i=="object"&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("gg.hotspot",r=new t(this,f)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.options=null;this.$element=null;this.selectorIDPrefix="thc-selector-";this.hotspotIDPrefix="thc-hotspot-";this.init("hotspot",n,t)};t.VERSION="2.0.0";t.DEFAULTS={animation:!0,inputImageUrlID:"#thc-input-image-url",btnLoadImageID:"#thc-btn-load-image",imageContainerID:"#thc-image-container",imageHotspotContainerID:"#thc-image-hotspots-container",imageHotspotPreviewContainerID:"#thc-image-hotspots-preview",hotspotHtmlContainerID:"#thc-hotspots-html",hotspotJsContainerID:"#thc-hotspots-js",propertiesTabsID:"#thc-properties-tabs",btnSaveHotspotID:"#thc-btn-save-hotspot",btnDeleteHotspotID:"#thc-btn-delete-hotspot",btnRegenerateHotspotsID:"#thc-btn-regen-hotspots",btnPreviewHotspotsID:"#thc-btn-preview-hotspots",radius:20,bordercolor:"#ff0000",backcolor:"#ff0000",blink:!0,opacity:.8};t.prototype.init=function(t,i,r){var u,f,e,o;this.$element=n(i);this.options=this.getOptions(r);u=this;f=this.$element.find(this.options.btnLoadImageID).eq(0);f.on("click",function(){var n=u.$element.find(u.options.inputImageUrlID).eq(0),t=u.$element.find(u.options.imageHotspotContainerID).eq(0);u.loadImage(n,t)});e=n(this.options.btnPreviewHotspotsID);e.on("click",function(){u.previewHotspots()});o=n(this.options.btnRegenerateHotspotsID);o.on("click",function(){u.regnerateCode()});n(this.options.propertiesTabsID).hide(0);n(this.options.propertiesTabsID).find('[data-toggle="content-toolbar-tooltip"]').tinytooltip({skin:"custom",border:0,backcolor:"#6c757d",opacity:.9});this.insertTemplateCode();this.resetAction()};t.prototype.insertTemplateCode=function(){n(this.options.propertiesTabsID).find('[data-toggle="content-toolbar-tooltip"]').each(function(){n(this).off();n(this).on("click",function(){var t="",i=n(this).data("template-type");i=="image"?t='<p class="light"> \n    <img src="assets/images/eagle.jpg" class="image-left" /> \n    Lorem ipsum dolor sit amet, consectetur adipiscing elit. \n    Donec elementum consectetur felis non viverra. \n<\/p>':i=="video"?t='<div class="video-wrapper"> \n    <iframe src="https://www.youtube.com/embed/hA6hldpSTF8" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen><\/iframe> \n<\/div>':i=="menu"&&(t='<div class="tinytooltip-menu"> \n    <ul> \n        <li><a href="#">sample list item 1 text<\/a><\/li> \n        <li><a href="#">sample list item 2 text<\/a><\/li> \n        <li class="last-child"><a href="#">sample list item 3 text<\/a><\/li> \n    <\/ul> \n<\/div>');n("#data-content").val(t)})})};t.prototype.resetAction=function(){n("#data-action").val()=="popover"?n("#data-title-panel").show():n("#data-title-panel").hide();n("#data-action").on("change",function(){n(this).val()=="popover"?n("#data-title-panel").show():n("#data-title-panel").hide()});n(this.options.imageHotspotContainerID).find(".thc-hotspot").each(function(){n(this).tinytooltip("hide")});n(this.options.imageHotspotPreviewContainerID).find(".thc-hotspot").each(function(){n(this).tinytooltip("hide")})};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return n.extend({},this.getDefaults(),this.$element.data(),t)};t.prototype.loadImage=function(t,i){var r,e,u,f;i.css({position:"relative",left:"-9999px"});i.html("");r=n('<div id="thc-image-container"><\/div>');r.appendTo(i);e=t.val();u=n('<img src="'+e+'" />');u.css({border:"1px solid #ffffff"});u.appendTo(r);u.on("load",function(){var t=n(this).width(),u=n(this).height(),e;n(this).css({width:t,height:u});n(this).attr("data-width",t);n(this).attr("data-height",u);i.css({width:t+2,height:u+2});e=u/t*100;r.css({position:"relative",height:"0px","padding-bottom":e+"%"});i.slideUp(0,function(){i.css({left:"auto"})});i.slideDown(1e3,function(){f.resetScroll(i)})});f=this;i.unbind("mousedown");i.on("mousedown",function(n){f.createHotspot(n)})};t.prototype.resetScroll=function(t){n("html, body").animate({scrollTop:t.offset().top-60},1e3)};t.prototype.resetScrollTabs=function(){var t=n(this.options.propertiesTabsID);n("html, body").animate({scrollTop:t.offset().top-60},1e3)};t.prototype.createHotspot=function(t){var r=n(this.options.imageHotspotContainerID),e={X:0,Y:0},u;e=t.offsetX==undefined?{X:t.pageX-r.offset().left-16,Y:t.pageY-r.offset().top-16}:{X:t.offsetX-16,Y:t.offsetY-16};var f=n.now(),o=this.selectorIDPrefix+f,s=this.hotspotIDPrefix+f,i=n('<div class="thc-selector ui-widget-content" id="'+o+'" data-uid="'+f+'"><div class="thc-hotspot hotspot blink" id="'+s+'" data-uid="'+f+'"><div class="data-template-container"><\/div><\/div><\/div>');i.css({position:"absolute",left:e.X,top:e.Y,border:"dashed 2px rgba(136, 136, 136, 0.8)",padding:"5px"});i.find(".thc-hotspot").css({width:"20px",height:"20px",backgroundColor:this.options.backcolor,border:"1px solid "+this.options.bordercolor,opacity:this.options.opacity,borderRadius:this.options.radius+"px"});i.find(".thc-hotspot").attr("data-hotspot-blink",1);i.find(".thc-hotspot").resizable({});i.find(".ui-resizable-handle.ui-icon").css({right:"-10px",bottom:"-10px"});i.find(".thc-hotspot > .data-template-container").css({display:"none"});u=this;i.draggable({containment:"parent",scroll:!1,start:function(){u.changeSelection(this,r)}});i.appendTo(r);this.changeSelection(i,r);i.bind("mousedown",function(){return u.changeSelection(this,r),!1});i.bind("dblclick",function(){return u.setProperties(this),!1});i.on("doubletap",function(){return u.setProperties(this),!1})};t.prototype.changeSelection=function(t,i){i.find(".thc-selector").each(function(){n(this).css({borderColor:"rgba(136, 136, 136, 0.8)",background:"none"})});n(t).css({borderColor:"#000000",backgroundColor:"rgba(255, 255, 0, 0.5)"});var r=n(this.options.propertiesTabsID);r.css("display")=="block"&&this.setProperties(t)};t.prototype.setProperties=function(t){var u=n(this.options.propertiesTabsID),r,i;u.slideDown();u.find('[data-toggle="tab"]').first().tab("show");r=n.fn.tinytooltip.Constructor.DEFAULTS;r.html=!0;r.trigger="hover";i=n(t).find(".thc-hotspot");n("#data-uid").val(i.attr("data-uid"));n("#data-animation").val(i.attr("data-animation")!=null?i.attr("data-animation"):r.animation?1:0);n("#data-action").val(i.attr("data-action")!=null?i.attr("data-action"):r.action);n("#data-trigger").val(i.attr("data-trigger")!=null?i.attr("data-trigger"):r.trigger);n("#data-placement").val(i.attr("data-placement")!=null?i.attr("data-placement"):r.placement);n("#data-delay-show").val(i.attr("data-delay-show")!=null?i.attr("data-delay-show"):r.delay.show);n("#data-delay-hide").val(i.attr("data-delay-hide")!=null?i.attr("data-delay-hide"):r.delay.hide);n("#data-responsive").val(i.attr("data-responsive")!=null?i.attr("data-responsive"):r.responsive?1:0);n("#data-html").val(i.attr("data-html")!=null?i.attr("data-html"):r.html?1:0);n("#data-title").val(i.attr("data-title")!=null?i.attr("data-title"):null);n("#data-content").val(i.find(".data-template-container").html()!=null?i.find(".data-template-container").html():null);n("#data-skin").val(i.attr("data-skin")!=null?i.attr("data-skin"):r.skin);n("#data-textalign").val(i.attr("data-textalign")!=null?i.attr("data-textalign"):r.textalign);n("#data-shadow").val(i.attr("data-shadow")!=null?i.attr("data-shadow"):r.shadow?1:0);n("#data-opacity").val(i.attr("data-opacity")!=null?i.attr("data-opacity"):r.opacity);n("#data-border").val(i.attr("data-border")!=null?i.attr("data-border"):r.border?1:0);n("#data-radius").val(i.attr("data-radius")!=null?i.attr("data-radius"):r.radius);n("#data-padding").val(i.attr("data-padding")!=null?i.attr("data-padding"):r.padding);n("#data-width").val(i.attr("data-width")!=null?i.attr("data-width"):r.width);n("#data-maxwidth").val(i.attr("data-maxwidth")!=null?i.attr("data-maxwidth"):r.maxwidth);n("#data-backcolor").val(i.attr("data-backcolor")!=null?i.attr("data-backcolor"):r.backcolor);n("#data-textcolor").val(i.attr("data-textcolor")!=null?i.attr("data-textcolor"):r.textcolor);n("#data-bordercolor").val(i.attr("data-bordercolor")!=null?i.attr("data-bordercolor"):r.bordercolor);n("#data-title-backcolor").val(i.attr("data-title-backcolor")!=null?i.attr("data-title-backcolor"):r.titleBackcolor);n("#data-title-bordercolor").val(i.attr("data-title-bordercolor")!=null?i.attr("data-title-bordercolor"):r.titleBordercolor);n("#data-title-textcolor").val(i.attr("data-title-textcolor")!=null?i.attr("data-title-textcolor"):r.titleTextcolor);n("#data-content-backcolor").val(i.attr("data-content-backcolor")!=null?i.attr("data-content-backcolor"):r.contentBackcolor);n("#data-content-textcolor").val(i.attr("data-content-textcolor")!=null?i.attr("data-content-textcolor"):r.contentTextcolor);n("#data-menu-linkcolor").val(i.attr("data-menu-linkcolor")!=null?i.attr("data-menu-linkcolor"):r.menuLinkcolor);n("#data-menu-hover-linkcolor").val(i.attr("data-menu-hover-linkcolor")!=null?i.attr("data-menu-hover-linkcolor"):r.menuHoverLinkcolor);n("#data-menu-hover-backcolor").val(i.attr("data-menu-hover-backcolor")!=null?i.attr("data-menu-hover-backcolor"):r.menuHoverBackcolor);n("#data-menu-item-dividercolor").val(i.attr("data-menu-item-dividercolor")!=null?i.attr("data-menu-item-dividercolor"):r.menuItemDividercolor);n("#data-arrowcolor").val(i.attr("data-arrowcolor")!=null?i.attr("data-arrowcolor"):r.arrowcolor);n("#data-hotspot-borderradius").val(i.attr("data-hotspot-borderradius")!=null?i.attr("data-hotspot-borderradius"):this.options.radius);n("#data-hotspot-bordercolor").val(i.attr("data-hotspot-bordercolor")!=null?i.attr("data-hotspot-bordercolor"):this.options.bordercolor);n("#data-hotspot-backcolor").val(i.attr("data-hotspot-backcolor")!=null?i.attr("data-hotspot-backcolor"):this.options.backcolor);n("#data-hotspot-opacity").val(i.attr("data-hotspot-opacity")!=null?i.attr("data-hotspot-opacity"):this.options.opacity);n("#data-hotspot-blink").val(i.attr("data-hotspot-blink")!=null?i.attr("data-hotspot-blink"):this.options.blink?1:0);var f=n(this.options.btnSaveHotspotID),e=n(this.options.btnDeleteHotspotID),o=this;f.off();f.on("click",function(){o.saveHotspot(t,u)});e.off();e.on("click",function(){o.deleteHotspot(t,u)});this.resetAction();this.resetScrollTabs()};t.prototype.saveHotspot=function(t,i){var h=n.fn.tinytooltip.Constructor.DEFAULTS,u=n(t).find(".thc-hotspot"),f=n.now(),o=this.selectorIDPrefix+f,s=this.hotspotIDPrefix+f,r,e;n(t).attr("id",o);n(t).attr("data-uid",f);u.attr("id",s);u.attr("data-uid",f);r=u.clone();r.appendTo(n(t));u.remove();r.attr("data-animation",n("#data-animation").val());r.attr("data-action",n("#data-action").val());r.attr("data-trigger",n("#data-trigger").val());r.attr("data-placement",n("#data-placement").val());r.attr("data-delay-show",n("#data-delay-show").val());r.attr("data-delay-hide",n("#data-delay-hide").val());r.attr("data-responsive",n("#data-responsive").val());r.attr("data-html",n("#data-html").val());r.attr("data-title",n("#data-title").val());r.find(".data-template-container").html(n("#data-content").val());r.attr("data-skin",n("#data-skin").val());r.attr("data-textalign",n("#data-textalign").val());r.attr("data-shadow",n("#data-shadow").val());r.attr("data-opacity",n("#data-opacity").val());r.attr("data-border",n("#data-border").val());r.attr("data-radius",n("#data-radius").val());r.attr("data-padding",n("#data-padding").val());r.attr("data-width",n("#data-width").val());r.attr("data-maxwidth",n("#data-maxwidth").val());n("#data-skin").val()=="custom"&&(r.attr("data-backcolor",n("#data-backcolor").val()),r.attr("data-textcolor",n("#data-textcolor").val()),r.attr("data-bordercolor",n("#data-bordercolor").val()),r.attr("data-title-backcolor",n("#data-title-backcolor").val()),r.attr("data-title-bordercolor",n("#data-title-bordercolor").val()),r.attr("data-title-textcolor",n("#data-title-textcolor").val()),r.attr("data-content-backcolor",n("#data-content-backcolor").val()),r.attr("data-content-textcolor",n("#data-content-textcolor").val()),r.attr("data-menu-linkcolor",n("#data-menu-linkcolor").val()),r.attr("data-menu-hover-linkcolor",n("#data-menu-hover-linkcolor").val()),r.attr("data-menu-hover-backcolor",n("#data-menu-hover-backcolor").val()),r.attr("data-menu-item-dividercolor",n("#data-menu-item-dividercolor").val()),r.attr("data-arrowcolor",n("#data-arrowcolor").val()));r.attr("data-hotspot-borderradius",n("#data-hotspot-borderradius").val());r.attr("data-hotspot-bordercolor",n("#data-hotspot-bordercolor").val());r.attr("data-hotspot-backcolor",n("#data-hotspot-backcolor").val());r.attr("data-hotspot-opacity",n("#data-hotspot-opacity").val());r.attr("data-hotspot-blink",n("#data-hotspot-blink").val());r.css({backgroundColor:n("#data-hotspot-backcolor").val(),border:"1px solid "+n("#data-hotspot-bordercolor").val(),opacity:n("#data-hotspot-opacity").val(),borderRadius:n("#data-hotspot-borderradius").val()+"px"});n("#data-hotspot-blink").val()==1?r.addClass("blink"):r.removeClass("blink");r.resizable({});r.resizable("destroy");r.resizable({});r.find(".ui-resizable-handle.ui-icon").css({right:"-10px",bottom:"-10px"});e=this;n("#data-action").val()=="popover"?r.tinytooltip({title:n("#data-title").val(),content:e.getTemplateContainerData(r)}):r.tinytooltip({title:e.getTemplateContainerData(r)});this.generateCode();i.slideUp()};t.prototype.deleteHotspot=function(t,i){n(t).remove();i.slideUp()};t.prototype.getTemplateContainerData=function(n){return n.find(".data-template-container").html()};t.prototype.generateCode=function(){var e=this,o=n(this.options.imageHotspotContainerID),u=n(this.options.imageHotspotPreviewContainerID),i,r;u.empty();i=n('<div class="thc-hotspot-wrapper"><\/div>');i.appendTo(u);r=n('<div class="thc-hotspot-container"><\/div>');r.appendTo(i);var f=n(this.options.imageContainerID).find("img").eq(0),s=f.attr("src"),t=n('<img src="'+s+'" />');t.appendTo(r);t.on("load",function(){var s,h,c,l,a;t.attr("data-width",f.data("width"));t.attr("data-height",f.data("height"));s=t.data("width");h=t.data("height");i.css({maxWidth:s});c=h/s*100;r.css({position:"relative",height:"0px","padding-bottom":c+"%"});o.find(".thc-hotspot").each(function(){var t=n(this).clone();t.resizable();t.resizable("destroy");t.appendTo(r);var i=(n(this).parent().position().left+6)/s*100,u=(n(this).parent().position().top+6)/h*100,f=(t.width()+2)/s*100,e=(t.height()+2)/h*100;t.css({top:u+"%",left:i+"%",width:f+"%",height:e+"%",backgroundColor:t.attr("data-hotspot-backcolor"),border:"1px solid "+t.attr("data-hotspot-bordercolor"),opacity:t.attr("data-hotspot-opacity"),borderRadius:t.attr("data-hotspot-borderradius")+"px"});t.attr("data-hotspot-left",i);t.attr("data-hotspot-top",u);t.attr("data-hotspot-width",f);t.attr("data-hotspot-height",e);t.attr("data-hotspot-width-px",t.width()+2);t.attr("data-hotspot-height-px",t.height()+2);t.attr("data-hotspot-blink")==1?t.addClass("blink"):t.removeClass("blink")});i.find(".thc-hotspot").each(function(){n(this).attr("data-action")=="popover"?n(this).tinytooltip({title:function(){return n(this).data("title")},content:function(){return n(this).find(".data-template-container").html()}}):n(this).tinytooltip({title:function(){return n(this).find(".data-template-container").html()}})});l="$('.thc-hotspot-wrapper .thc-hotspot').each(function () { \n    if ($(this).attr('data-action') == 'popover') { \n        $(this).tinytooltip({ \n            title: function () { \n                return $(this).data('title'); \n            }, \n            content: function () { \n                return $(this).find('.data-template-container').html(); \n            } \n        }); \n    } else { \n        $(this).tinytooltip({ \n            title: function () { \n                return $(this).find('.data-template-container').html(); \n            } \n        }); \n    } \n});";n(e.options.hotspotJsContainerID).val(l);a=u.html();n(e.options.hotspotHtmlContainerID).val(a)})};t.prototype.previewHotspots=function(){this.generateCode()};t.prototype.regnerateCode=function(){var e=this.$element.find(this.options.inputImageUrlID).eq(0),t=n(this.options.hotspotHtmlContainerID).val(),i,r,u,f;t=n.parseHTML(t);i=n(t).find(".thc-hotspot-container > img").eq(0);r=i.attr("src");e.val(r);u=this.$element.find(this.options.btnLoadImageID).eq(0);u.trigger("click");f=this;n(t).find(".thc-hotspot-container .thc-hotspot").each(function(){f.reGenerateHotspot(this,i)})};t.prototype.reGenerateHotspot=function(t,i){var f=n(this.options.imageHotspotContainerID),s=i.data("width"),h=i.data("height"),o={left:0,top:0},l=n(t).data("hotspot-left")*s/100-6,a=n(t).data("hotspot-top")*h/100-6,c,u;o={left:l,top:a};var b=n(t).data("hotspot-width")*s/100,k=n(t).data("hotspot-height")*h/100,v=n(t).data("hotspot-width-px"),y=n(t).data("hotspot-height-px"),e=n.now(),p=this.selectorIDPrefix+e,w=this.hotspotIDPrefix+e,r=n('<div class="thc-selector ui-widget-content" id="'+p+'" data-uid="'+e+'"><div class="thc-hotspot hotspot blink" id="'+w+'" data-uid="'+e+'"><div class="data-template-container"><\/div><\/div><\/div>');r.css({position:"absolute",left:o.left,top:o.top,border:"dashed 2px rgba(136, 136, 136, 0.8)",padding:"5px"});r.find(".thc-hotspot").css({width:v,height:y,backgroundColor:n(t).data("hotspot-backcolor"),border:"1px solid "+n(t).data("hotspot-bordercolor"),opacity:n(t).data("hotspot-opacity"),borderRadius:n(t).data("hotspot-borderradius")+"px"});n.each(n(t).data(),function(t,i){var u=t.match(/[A-Z][a-z]+/g);u!=null&&u.length?(n.each(u,function(n,i){t=t.replace(new RegExp(i,"g"),"")}),t="data-"+t+"-"+u.join("-").toLowerCase()):t="data-"+t;r.find(".thc-hotspot").attr(t,i)});r.find(".thc-hotspot").resizable({});r.find(".ui-resizable-handle.ui-icon").css({right:"-10px",bottom:"-10px"});c=n(t).find(".data-template-container").html();r.find(".thc-hotspot > .data-template-container").css({display:"none"}).html(c);r.removeClass("blink");n(t).data("hotspot-blink")==1?r.find(".thc-hotspot").addClass("blink"):r.find(".thc-hotspot").removeClass("blink");u=this;n(t).data("action")=="popover"?r.find(".thc-hotspot").tinytooltip({title:n(t).data("title"),content:u.getTemplateContainerData(r)}):r.find(".thc-hotspot").tinytooltip({title:u.getTemplateContainerData(r)});r.draggable({containment:"parent",scroll:!1,start:function(){u.changeSelection(this,f)}});r.appendTo(f);this.changeSelection(t,f);r.bind("mousedown",function(){return u.changeSelection(this,f),!1});r.bind("dblclick",function(){return u.setProperties(this),!1});r.on("doubletap",function(){return u.setProperties(this),!1})};n.fn.tinyHotspotCreator=i;n.fn.tinyHotspotCreator.Constructor=t}(jQuery);